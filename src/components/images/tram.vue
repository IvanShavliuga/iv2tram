<template>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="tram"
    viewBox="0 0 100 100"
    width="200"
    height="200">
    <g id="wheels">
      <circle
        cx="19.15"
        cy="35"
        r="2"/>
      <circle
        cx="24.15"
        cy="35"
        r="2"/>
      <circle
        cx="51.15"
        cy="35"
        r="2"/>
      <circle
        cx="56.15"
        cy="35"
        r="2"/>

    </g>
    <g id="mustache">
      <line
        x1="52.5"
        y1="15"
        x2="60"
        y2="8.5"
        stroke="#de4378"
        stroke-width="0.55"/>
      <line
        x1="52.5"
        y1="1.5"
        x2="60"
        y2="8.5"
        stroke="#de4378"
        stroke-width="0.55"/>
      <line
        x1="52.5"
        y1="15"
        x2="45"
        y2="8.5"
        stroke="#de4378"
        stroke-width="0.55"/>
      <line
        x1="52.5"
        y1="1.5"
        x2="45"
        y2="8.5"
        stroke="#de4378"
        stroke-width="0.55"/>
      <line
        x1="50"
        y1="0.7"
        x2="55"
        y2="0.7"
        stroke="#de4378"
        stroke-width="0.55"/>
      <line
        x1="52.5"
        y1="0.7"
        x2="52.5"
        y2="1.5"
        stroke="#de4378"
        stroke-width="0.55"/>
    </g>

    <g id="body">
      <rect
        x="5"
        y="15"
        width="68"
        height="20"
        fill="#eeeeee"
        stroke="#343434"
        stroke-width="0.15"/>
      <rect
        x="5.15"
        y="24"
        width="67.70"
        height="5"
        fill="#ee8956"
        stroke="#ee8956"
        stroke-width="0.15"/>
      <g id="armcharms">
        <rect
          x="17.15"
          y="22"
          width="2"
          height="2"
          fill="#252525"
          stroke="#ee8956"
          stroke-width="0.15"/>
        <rect
          x="24.75"
          y="22"
          width="2"
          height="2"
          fill="#252525"
          stroke="#ee8956"
          stroke-width="0.15"/>
        <rect
          x="42.15"
          y="22"
          width="2"
          height="2"
          fill="#252525"
          stroke="#ee8956"
          stroke-width="0.15"/>
        <rect
          x="49.75"
          y="22"
          width="2"
          height="2"
          fill="#252525"
          stroke="#ee8956"
          stroke-width="0.15"/>
        <rect
          x="67.15"
          y="22"
          width="2"
          height="2"
          fill="#252525"
          stroke="#ee8956"
          stroke-width="0.15"/>
      </g>

      <g id="windows">
        <rect
          x="5"
          y="15.15"
          width="3"
          height="8.5"
          fill="rgba(34,34,120,0.5)"
          stroke="#999999"
          stroke-width="0.15"/>
        <rect
          x="8.15"
          y="15.15"
          width="9"
          height="8.5"
          fill="rgba(34,34,120,0.5)"
          stroke="#999999"
          stroke-width="0.15"/>
        <rect
          x="33"
          y="15.15"
          width="9"
          height="8.5"
          fill="rgba(34,34,120,0.8)"
          stroke="#999999"
          stroke-width="0.15"/>
        <rect
          x="8.15"
          y="15.15"
          width="9"
          height="8.5"
          fill="rgba(34,34,120,0.5)"
          stroke="#999999"
          stroke-width="0.15"/>
        <rect
          x="58"
          y="15.15"
          width="9"
          height="8.5"
          fill="rgba(34,34,120,0.5)"
          stroke="#999999"
          stroke-width="0.15"/>
        <rect
          x="17.15"
          y="15.15"
          width="16"
          height="8.70"
          fill="rgba(34,34,120,0.5)"
          stroke="#ededed"
          stroke-width="0.15"/>
        <rect
          x="42.15"
          y="15.15"
          width="16"
          height="8.70"
          fill="rgba(34,34,120,0.5)"
          stroke="#ededed"
          stroke-width="0.15"/>
        <rect
          x="67.15"
          y="15.15"
          width="6"
          height="8.70"
          fill="rgba(34,34,120,0.5)"
          stroke="#ededed"
          stroke-width="0.15"/>
        <line
          x1="17.15"
          y1="19"
          x2="33"
          y2="19"
          stroke="#ededed"
          stroke-width="0.15"/>
        <line
          x1="24.75"
          y1="15"
          x2="24.75"
          y2="19"
          stroke="#ededed"
          stroke-width="0.15"/>
        <line
          x1="33.15"
          y1="19"
          x2="58"
          y2="19"
          stroke="#ededed"
          stroke-width="0.15"/>
        <line
          x1="49.75"
          y1="15"
          x2="49.75"
          y2="19"
          stroke="#ededed"
          stroke-width="0.15"/>
      </g>
      <g id="enter">
        <rect
          x="8.15"
          y="24"
          width="9"
          height="5"
          fill="#aaaaaa"
          stroke="#999999"
          stroke-width="0.15"/>
        <rect
          x="8.15"
          y="29"
          width="9"
          height="3"
          fill="#333333"
          stroke="#eeeeee"
          stroke-width="0.15"/>
        <rect
          x="8.15"
          y="32"
          width="9"
          height="3"
          fill="#222222"
          stroke="#eeeeee"
          stroke-width="0.15"/>
        <rect
          x="33"
          y="24"
          width="9"
          height="5"
          fill="#aaaaaa"
          stroke="#999999"
          stroke-width="0.15"/>
        <rect
          x="33"
          y="29"
          width="9"
          height="3"
          fill="#333333"
          stroke="#eeeeee"
          stroke-width="0.15"/>
        <rect
          x="33"
          y="32"
          width="9"
          height="3"
          fill="#222222"
          stroke="#eeeeee"
          stroke-width="0.15"/>
        <rect
          x="58"
          y="24"
          width="9"
          height="5"
          fill="#aaaaaa"
          stroke="#999999"
          stroke-width="0.15"/>
        <rect
          x="58"
          y="29"
          width="9"
          height="3"
          fill="#333333"
          stroke="#eeeeee"
          stroke-width="0.15"/>
        <rect
          x="58"
          y="32"
          width="9"
          height="3"
          fill="#222222"
          stroke="#eeeeee"
          stroke-width="0.15"/>
      </g>
      <g
        id="door"
        @click="doorclick"
      >
        <rect
          id="lastdoor"
          ref="lastdoor"
          x="8.15"
          y="15.15"
          width="9"
          height="20"
          fill="rgba(34,34,120,0.5)"
          stroke="#ededed"
          stroke-width="0.15"/>
        <rect
          id="middledoor"
          ref="middledoor"
          x="33"
          y="15.15"
          width="9"
          height="20"
          fill="rgba(34,34,120,0.5)"
          stroke="#ededed"
          stroke-width="0.15"/>
        <rect
          id="firstdoor"
          ref="firstdoor"
          x="58"
          y="15.15"
          width="9"
          height="20"
          fill="rgba(34,34,120,0.5)"
          stroke="#ededed"
          stroke-width="0.15"/>
      </g>
    </g>
  </svg>
</template>
<script>
import { TimelineMax, Back } from 'gsap'
export default {
  props: {
    count: {
      type: Number,
      default: 0
    },
    id: {
      type: Number,
      default: 0
    },
    line: {
      type: Object,
      default: () => {
        return {
          id: 0,
          start: 'stop 1',
          end: 'stop N'
        }
      }
    },
    stop: {
      type: String,
      default: ''
    }
  },
  data () {
    return {
      door: false
    }
  },
  watch: {
    count () {
      console.log(this.count)
      console.log(this.id)
      console.log(this.line)
      console.log(this.stop)
    }
  },
  methods: {
    doorclick () {
      console.log('door')
      const tl = new TimelineMax()
      const posX = (this.door) ? (0) : (8.15)
      tl.to(this.$refs.lastdoor, 0.01, {
        x: posX,
        delay: 0.7,
        ease: Back.easeOut
      }).to(this.$refs.middledoor, 0.01, {
        x: posX,
        delay: 0.7,
        ease: Back.easeOut
      }).to(this.$refs.firstdoor, 0.01, {
        x: posX,
        delay: 0.7,
        ease: Back.easeOut
      })
      if (!this.door) this.$emit('enter')
      else this.$emit('move')
      this.door = !this.door
    }
  }
}
</script>
